== Vista de Contexto


=== Alcance y Propósito del Diseño

El objetivo de esta sección es establecer formalmente las fronteras del Sistema de Reservaciones y definir los factores clave (interesados e impulsores) que guiarán las decisiones arquitectónicas.
El propósito primordial del diseño es crear una plataforma que asegure la confianza y consistencia atómica de las transacciones, a la vez que permita escalabilidad y la eficiencia operacional requeridas para la expansión global de la cadena hotelera.

==== Alcance del Diseño y Fronteras del Sistema (Contexto)

El SR está diseñado como el único sistema de registro para el inventario de habitaciones y el ciclo de vida de la reserva.
Sus fronteras encapsulan los cuatro módulos funcionales clave descritos en el DFD: venta, recepción, configuración y trazabilidad.

==== Fronteras Incluidas (In-Scope)

El diseño del SR abarca la lógica de negocio completa relacionada con:

* Gestión atómica de la reserva: Controlar la atomicidad y la concurrencia entre el pago y la retención del inventario.
* Inventario en tiempo real: Mantener y exponer el estado real y vendible de cada habitación a nivel de cadena.
* Lógica de cobro y ajustes: Calcular tarifas dinámicas, aplicar penalizaciones por cancelación y determinar los ajustes monetarios por modificación.
* Auditoría y trazabilidad: Generar logs inmutables para cada evento crítico (cobros, cancelaciones, cambios de precio), cumpliendo con los requisitos de seguridad y reconciliación financiera.

==== Fronteras Excluidas (Out-of-Scope) y Dependencias Externas

Las siguientes funciones se delegan a sistemas externos y definen los puntos de integración críticos de la arquitectura:

* Pasarela de Pagos: Maneja la autorización y captura de pagos con tarjeta de crédito, así como la gestión de tokens seguros. El SR interactúa con esta pasarela para procesar los cobros asociados a las reservas.

El diseño debe concentrarse en hacer que estas integraciones sean tolerantes a fallos (por ejemplo, si la Pasarela de Pagos cae, el SR debe compensar la reserva y liberar el inventario) y seguras.


Esta tabla puede utilizarse para priorizar decisiones arquitectónicas basadas en la criticidad de cada interesado.

=== Impulsores Arquitectónicos

Los impulsores arquitectónicos son los requisitos de más alto valor que tienen el impacto más profundo en la estructura del código y en el diseño de la arquitectura.

==== Impulsor 1: Atomicidad de la transacción y consistencia (confianza de cero incidentes)

Este es el impulsor de máxima prioridad y nace del objetivo de “Confianza y consistencia en la reserva: La tasa de incidentes de dobles cobros/reservas debe ser cero.”

Impacto:
Dicta el uso de patrones de persistencia que soporten la atomicidad para la Reserva.

Decisión Clave:
El proceso de realizar reserva debe ser tratado como una única transacción distribuida, donde la falla de un paso (Pago o bloqueo de inventario) revierte automáticamente los demás.

==== Impulsor 2: Escalabilidad masiva y baja latencia (Rendimiento)

Este impulsor proviene del contexto del proyecto (soportar 5,000 hoteles y 1M de habitaciones) y del requisito QAS-03 de respuesta inmediata para el Huésped.

Impacto:
Impide el uso de una arquitectura monolítica o una sola base de datos relacional.
La arquitectura debe estar diseñada para dividir la carga de trabajo:

* Consulta (Lectura): Debe ser atendida por sistemas de caché distribuidos (Redis/Memcached) y/o réplicas de bases de datos para asegurar respuestas en < 500 ms.
* Escritura (Transacción): La base de datos de inventario debe poder particionarse geográficamente o por tipo de inventario para evitar cuellos de botella.

Decisión Clave:
El sistema será diseñado bajo el patrón de microservicios para el desacoplamiento funcional y el escalamiento independiente.


image::contextDiagramSistemaHoteleroLevel0.png[Diagrama de Contexto Nivel 0, width=600, align=center]


image::contextDiagramSistemaHoteleroLevel1.png[Diagrama de Contexto Nivel 1, width=600, align=center]

